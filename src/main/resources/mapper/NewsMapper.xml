<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="resource.NewsMapper">
	<!-- 뉴스 시도명 구분  -->
<!-- 	<update id="zoneProvince" parameterType="hashmap">
		update content set p_code=#{p_code} where content=#{content}
	</update>
	
	<update id="zoneSigungu" parameterType="hashmap">
		update content set s_code=#{s_code} where content=#{content}
	</update> -->
	
	<!-- 기사내용 관련지명 코드 추가 -->
	<insert id="contentZone" parameterType="hashmap">
		insert into content set content=#{content}, p_code=#{p_code}, s_code=#{s_code} 
	</insert>
	
	<!-- 뉴스 전체 불러오기 -->
	<select id="allTitle" resultType="String">
		select title from newstmp;
	</select>
	
	<select id="readNews" parameterType="vo.NewsVO" resultType="vo.NewsVO">
		select title, date, contents from newstmp where title=#{title}
	</select>
	
	<select id="emptyZone" parameterType="hashmap" resultType="int">
		select count(p_code) from ${zoneName}
	</select>
	
	<select id="listProvince" resultType="vo.ProvinceVO">
		select * from province
	</select>
	
	<select id="listSigungu" resultType="vo.SigunguVO">
		select * from sigungu
	</select>
	
	<insert id="insertProvince" parameterType="vo.ProvinceVO">
		insert into province set p_code=#{p_code}, name=#{name}, 
		latitude=#{latitude}, longitude=#{longitude}
		on duplicate key update p_code=#{p_code}, name=#{name}, 
		latitude=#{latitude}, longitude=#{longitude}
	</insert>
	
	<insert id="insertSigungu" parameterType="vo.SigunguVO">
		insert into sigungu set p_code=#{p_code}, s_code=#{s_code}, name=#{name}, 
		latitude=#{latitude}, longitude=#{longitude}
		on duplicate key update p_code=${p_code}, s_code=#{s_code}, name=#{name}, 
		latitude=#{latitude}, longitude=#{longitude}
	</insert>
</mapper>